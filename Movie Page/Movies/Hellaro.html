<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>Movie Details & Booking</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
Â  
Â  <style>@import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
    :root { --bg: #0F172A; --card: #0F172A; --muted: #C0C0C0; --accent: #22d3ee; }
    html, body { font-family: 'Poppins'; background: var(--bg); color: #C0C0C0; }
    .glass { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); backdrop-filter: blur(8px); }
    .scrollbar::-webkit-scrollbar { height: 8px; width: 8px; }
    .scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 999px; }
    .seat { width: 36px; height: 36px; border-radius: 10px; display: grid; place-items: center; font-size: 12px; cursor: pointer; user-select: none; }
    .seat.available { background: #1f2937; }
    .seat.selected { background: #22c55e; color: #001b12; font-weight: 700; }
    .seat.booked { background: #4b5563; color: #a3a3a3; cursor: not-allowed; text-decoration: line-through; }
    .tag { background: rgba(34,211,238,0.12); border: 1px solid rgba(34,211,238,0.35); color: #a5f3fc; }

    

</style>
</head>
<body class="min-h-screen">
Â  Â  <header class=" top-0 z-40 glass" style="height: 150px;">    
Â  Â  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between">
    <h1 style="color: #C0C0C0;font-size: 30px;">Ticket Tales</h1>
Â  Â  Â  <div class="flex items-center gap-3">
Â  Â  Â  Â 
Â  Â  Â  Â  
Â  Â  Â  </div>
Â  Â  Â  <div class="flex items-center gap-3 w-[260px] sm:w-[360px]">
Â  Â  Â  Â  <select id="movieSelect" class="w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-400" style="background-color: #0F172A;">
Â  Â  Â  Â  Â  <option value="">Select a movieâ€¦</option>
Â  Â  Â  Â  </select>
Â  Â  Â  Â  <button id="scrollToBooking" class="hidden sm:inline-flex items-center gap-2 bg-cyan-400 text-black font-semibold px-4 py-2 rounded-xl hover:brightness-95 active:scale-95 transition" style="height: 50px; width: 220px;">
Â  Â  Â  Â  Â  Book Now
Â  Â  Â  Â  </button>
Â  Â  Â  </div>
Â  Â  </div>
Â  </header>

Â  Â  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 grid lg:grid-cols-3 gap-6" style=" display: flex; flex-direction: row;">
Â  Â  Â  Â  <section class="lg:col-span-2 space-y-4">
Â  Â  Â  <div class="glass rounded-3xl overflow-hidden">
Â  Â  Â  Â  <div class="aspect-video bg-black">
Â  Â  Â  Â  Â  <iframe id="trailerFrame" class="w-full h-full" src="" title="Movie trailer" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="p-4 sm:p-6">
Â  Â  Â  Â  Â  <div class="flex flex-wrap items-center gap-1 mb-3">
Â  Â  Â  Â  Â  Â  <span id="ageBadge" class="px-2.5 py-1 rounded-lg tag text-xs font-semibold">U/A</span>
Â  Â  Â  Â  Â  Â  <span id="langBadge" class="px-2.5 py-1 rounded-lg bg-white/5 border border-white/10 text-xs">Language</span>
Â  Â  Â  Â  Â  Â  <span id="genreBadge" class="px-2.5 py-1 rounded-lg bg-white/5 border border-white/10 text-xs">Genre</span>
Â  Â  Â  Â  Â  Â  <span id="ratingBadge" class="px-2.5 py-1 rounded-lg bg-amber-400/20 border border-amber-200/30 text-amber-200 text-xs">â˜… <span id="ratingValue">â€”</span></span>
Â  Â  Â  Â  Â  Â  <span id="priceBadge" class="px-2.5 py-1 rounded-lg bg-emerald-400/15 border border-emerald-300/30 text-emerald-200 text-xs">â‚¹<span id="priceValue">â€”</span></span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <h2 id="movieTitle" class="text-2xl sm:text-3xl font-bold"></h2>
Â  Â  Â  Â  Â  <p id="movieDescription" class="text-sm sm:text-base text-[color:var(--muted)] mt-2"></p>
Â  Â  Â  Â  Â  <div class="flex items-center gap-6 mt-4 text-sm text-[color:var(--muted)]">
Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41 1.01 4.22 2.53C11.09 5.01 12.76 4 14.5 4 17 4 19 6 19 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg> <span id="likesValue">â€” likes</span></div>
Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg> Top rated pick</div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-6">
Â  Â  Â  Â  Â  Â  <h3 class="text-sm uppercase tracking-wider text-white/70 mb-3">Cast</h3>
Â  Â  Â  Â  Â  Â  <div id="castRow" class="scrollbar flex gap-3 overflow-x-auto pb-1"></div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-6">
Â  Â  Â  Â  Â  Â  <h3 class="text-sm uppercase tracking-wider text-white/70 mb-3">Reviews</h3>
Â  Â  Â  Â  Â  Â  <div id="reviewsCol" class="grid sm:grid-cols-2 gap-3"></div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="mt-6 flex flex-wrap gap-3">
Â  Â  Â  Â  Â  Â  <button id="bookNowTop" class="bg-cyan-400 text-black font-semibold px-5 py-2.5 rounded-xl hover:brightness-95 active:scale-95 transition">Book Now</button>
Â  Â  Â  Â  Â  Â  <a id="watchOnYT" href="#" target="_blank" class="px-5 py-2.5 rounded-xl bg-white/5 border border-white/10 text-white/80 hover:bg-white/10">Open trailer on YouTube</a>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  Â  Â  <aside class="space-y-4" >
Â  Â  Â  <div class="glass rounded-3xl p-4">
Â  Â  Â  Â  <img id="posterImg" src="" alt="Poster" class="w-full aspect-[2/3] object-cover rounded-2xl" style="width: 400px;" />
Â  Â  Â  Â  <div class="mt-3 grid grid-cols-2 gap-2 text-xs text-white/80">
Â  Â  Â  Â  Â  <div class="glass rounded-xl p-3 text-center">
Â  Â  Â  Â  Â  Â  <div class="text-white text-lg font-bold" id="quickRating">â€”</div>
Â  Â  Â  Â  Â  Â  <div class="text-white/60">Rating</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="glass rounded-xl p-3 text-center">
Â  Â  Â  Â  Â  Â  <div class="text-white text-lg font-bold" id="quickPrice">â€”</div>
Â  Â  Â  Â  Â  Â  <div class="text-white/60">Price</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="glass rounded-xl p-3 text-center col-span-2">
Â  Â  Â  Â  Â  Â  <div class="text-white text-sm" id="quickGenre">â€”</div>
Â  Â  Â  Â  Â  Â  <div class="text-white/60 text-xs">Genre â€¢ Language</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div class="glass rounded-3xl p-4" style="height: 200px; margin: 1px;"  >
Â  Â  Â  Â  <h3 class="font-semibold mb-2">Filters</h3>
Â  Â  Â  Â  <div class="flex flex-wrap gap-2" style="display: flex; flex-direction: row ;width: 400px;" >
Â  Â  Â  Â  Â  <select id="filterLanguage" class="bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm"style="width:150px;background-color: #0F172A;">
Â  Â  Â  Â  Â  Â  <option value="">Language</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  <select id="filterGenre" class="bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm" style="width: 100px;background-color: #0F172A;">
Â  Â  Â  Â  Â  Â  <option value="">Genre</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  <button id="clearFilters" class="text-xs px-3 py-2 rounded-lg bg-white/5 border border-white/10" style="width: 100px;" >Clear</button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </aside>
Â  </main>

Â  Â  <section id="bookingSection" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
Â  Â  <div class="glass rounded-3xl p-4 sm:p-6">
Â  Â  Â  <div class="flex items-start justify-between gap-3 flex-wrap">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <h3 class="text-xl sm:text-2xl font-bold">Book Tickets</h3>
Â  Â  Â  Â  Â  <p class="text-white/60 text-sm">Pick your date, theatre and slot, then choose seats.</p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="flex items-center gap-3 text-xs">
Â  Â  Â  Â  Â  <span class="inline-flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-[#22c55e]"></span> Selected</span>
Â  Â  Â  Â  Â  <span class="inline-flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-[#1f2937]"></span> Available</span>
Â  Â  Â  Â  Â  <span class="inline-flex items-center gap-2"><span class="inline-block w-3 h-3 rounded bg-[#4b5563]"></span> Booked</span>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div class="mt-5 grid lg:grid-cols-3 gap-4" style=" display: flex; flex-direction: row;">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-4">
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label class="text-xs text-white/70">Date</label>
Â  Â  Â  Â  Â  Â  <input id="dateInput" type="date" class="w-full mt-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label class="text-xs text-white/70">Theatre</label>
Â  Â  Â  Â  Â  Â  <select id="theatreSelect" class="w-full mt-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2" style="background-color: #0F172A;"></select>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label class="text-xs text-white/70">Slot</label>
Â  Â  Â  Â  Â  Â  <div id="slotRow" class="mt-1 flex flex-wrap gap-2"></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="lg:col-span-2">
Â  Â  Â  Â  Â  <div class="glass rounded-2xl p-3">
Â  Â  Â  Â  Â  Â  <div id="seatsGrid" class="grid grid-cols-12 gap-2 justify-items-center"></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="mt-4 flex flex-wrap items-center justify-between gap-3">
Â  Â  Â  Â  Â  Â  <div class="text-white/80 text-sm">Total (<span id="selectedCount">0</span> seats): <span id="totalPrice">â‚¹0</span></div>
Â  Â  Â  Â  Â  Â  <button id="proceedBtn" class="bg-emerald-400 text-black font-semibold px-5 py-2.5 rounded-xl hover:brightness-95 active:scale-95 transition">Proceed to Payment</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </section>
Â  
Â  Â  <section id="ticketContainer" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-24 hidden">
Â  Â  <div class="glass rounded-3xl p-4 sm:p-6 mb-10">
Â  Â  Â  <h3 class="text-xl sm:text-2xl font-bold text-emerald-400 mb-4">âœ… Booking Confirmed!</h3>
Â  Â  Â  <div id="ticketOutput" class="flex justify-center">
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  </div>
Â  </section>

Â  Â  <div id="modal" class="fixed inset-0 hidden place-items-center bg-black/50 p-4 " style="margin: 80px;">
Â  Â  <div class="glass rounded-3xl max-w-md w-full p-6">
Â  Â  Â  <div class="flex items-start justify-between">
Â  Â  Â  Â  <h4 class="text-xl font-bold">Booking Summary</h4>
Â  Â  Â  Â  <button id="closeModal" class="text-white/60 hover:text-white">âœ•</button>
Â  Â  Â  </div>
Â  Â  Â  <div class="mt-4 space-y-2 text-sm text-white/80">
Â  Â  Â  Â  <div><span class="text-white/60">Movie:</span> <span id="sumMovie">â€”</span></div>
Â  Â  Â  Â  <div><span class="text-white/60">Date:</span> <span id="sumDate">â€”</span></div>
Â  Â  Â  Â  <div><span class="text-white/60">Theatre:</span> <span id="sumTheatre">â€”</span></div>
Â  Â  Â  Â  <div><span class="text-white/60">Slot:</span> <span id="sumSlot">â€”</span></div>
Â  Â  Â  Â  <div><span class="text-white/60">Seats:</span> <span id="sumSeats">â€”</span></div>
Â  Â  Â  Â  <div class="pt-2 border-t border-white/10 mt-2 text-base"><span class="text-white">Total:</span> <span id="sumTotal">â‚¹0</span></div>
Â  Â  Â  </div>
Â  Â  Â  <div class="mt-5 flex gap-3">
Â  Â  Â  Â  <button id="confirmPay" class="flex-1 bg-cyan-400 text-black font-semibold px-5 py-2.5 rounded-xl hover:brightness-95 active:scale-95 transition">Pay Now</button>
Â  Â  Â  Â  <button id="closeModal2" class="flex-1 bg-white/5 border border-white/10 rounded-xl">Cancel</button>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <footer class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-center text-white/50">
Â  Â  Built with â¤ for your movie booking by TICKET TALES
Â  </footer>

Â  <script>
Â  Â  const movies = [
Â  Â  Â  // NOTE: Poster paths are assumed. Replace 'posters/...' with your actual image file paths.
Â  Â  Â  { title: "Avengers", language: "English", genre: "Action", price: 300, rating: 8.5, likes: 1200000, age: "U/A 13+", description: "Earth's mightiest heroes team up to fight against Loki and his alien army.", cast: ["Robert Downey Jr.", "Chris Evans", "Scarlett Johansson"], reviews: ["Action-packed and entertaining!", "One of the best superhero team-up movies."], trailer: "https://www.youtube.com/watch?v=eOrNdBpGMv8", poster: "Avengers.jpg" },
Â  Â  Â  { title: "3 Idiots", language: "Hindi", genre: "Comedy", price: 200, rating: 8.4, likes: 1500000, age: "U/A", description: "Three friends navigate college life while challenging the education system.", cast: ["Aamir Khan", "R. Madhavan", "Sharman Joshi"], reviews: ["Inspirational and hilarious at the same time.", "A must-watch for students."], trailer: "https://www.youtube.com/watch?v=DKzBmRRdPXo", poster: "3Idiots.jpg" },
Â  Â  Â  { title: "KGF", language: "Hindi", genre: "Action", price: 250, rating: 8.2, likes: 1100000, age: "U/A 16+", description: "A young man rises from poverty to become a fearsome gangster in the Kolar Gold Fields.", cast: ["Yash", "Srinidhi Shetty"], reviews: ["High-voltage action and mass entertainment!", "Yash's performance is powerful."], trailer: "https://www.youtube.com/watch?v=GpMoLL_80Jk", poster: "KGF.jpg" },
Â  Â  Â  { title: "Chhello Divas", language: "Gujarati", genre: "Comedy", price: 150, rating: 7.8, likes: 500000, age: "U/A", description: "A coming-of-age comedy about college students and their fun-filled lives.", cast: ["Malhar Thakar", "Yash Soni", "Mitil Jain"], reviews: ["Relatable and funny Gujarati film.", "Perfect slice of college life comedy."], trailer: "https://www.youtube.com/watch?v=IyZLbsbEYj4", poster: "ChelloDivas.jpg" },
Â  Â  Â  { title: "Enthiran", language: "Tamil", genre: "Sci-Fi", price: 350, rating: 7.9, likes: 950000, age: "U/A 13+", description: "A scientist creates a humanoid robot that develops emotions and turns rogue.", cast: ["Rajinikanth", "Aishwarya Rai Bachchan"], reviews: ["Rajinikanth at his best with stunning VFX.", "Sci-fi blockbuster of Indian cinema."], trailer: "https://www.youtube.com/watch?v=sY_F6issHsU", poster: "Enthiran.png" },
Â  Â  Â  { title: "Swades", language: "Hindi", genre: "Drama", price: 180, rating: 8.2, likes: 700000, age: "U/A", description: "An NRI scientist returns to his homeland and rediscovers his roots.", cast: ["Shah Rukh Khan", "Gayatri Joshi"], reviews: ["Heart-touching and socially relevant.", "SRK's most underrated performance."], trailer: "https://www.youtube.com/watch?v=vc7AZNWvs0M", poster: "Swades.jpg" },
Â  Â  Â  { title: "Inception", language: "English", genre: "Sci-Fi", price: 120, rating: 8.8, likes: 1600000, age: "U/A 16+", description: "A skilled thief enters people's dreams to steal secrets and plant ideas.", cast: ["Leonardo DiCaprio", "Joseph Gordon-Levitt", "Elliot Page"], reviews: ["Mind-bending and visually stunning.", "Christopher Nolanâ€™s masterpiece."], trailer: "https://www.youtube.com/watch?v=YoHD9XEInc0", poster: "Inception.jpg" },
Â  Â  Â  { title: "Parasite", language: "Korean", genre: "Thriller", price: 100, rating: 8.6, likes: 900000, age: "U/A 16+", description: "A poor family infiltrates a wealthy household with unexpected consequences.", cast: ["Song Kang-ho", "Choi Woo-shik", "Park So-dam"], reviews: ["Dark, brilliant, and thought-provoking.", "Oscar-winning cinematic gem."], trailer: "https://www.youtube.com/watch?v=isOGD_7hNIY", poster: "Parasite.jpg" },
Â  Â  Â  { title: "The Dark Knight", language: "English", genre: "Action", price: 320, rating: 9.0, likes: 2000000, age: "U/A 16+", description: "Batman faces his greatest challenge in the form of the Joker.", cast: ["Christian Bale", "Heath Ledger", "Aaron Eckhart"], reviews: ["Heath Ledgerâ€™s Joker is legendary.", "Best superhero movie ever made."], trailer: "https://www.youtube.com/watch?v=EXeTwQWrcwY", poster: "TheDarkKnight.jpg" },
Â  Â  Â  { title: "Munna Bhai M.B.B.S.", language: "Hindi", genre: "Comedy", price: 220, rating: 8.1, likes: 1300000, age: "U/A", description: "A goon enrolls in medical college to fulfill his fatherâ€™s dream.", cast: ["Sanjay Dutt", "Arshad Warsi", "Boman Irani"], reviews: ["Funny and emotional in equal measure.", "Circuit and Munnaâ€™s friendship is iconic."], trailer: "https://www.youtube.com/watch?v=GyFXQjNfqWo", poster: "MunnabhaiMBBS.jpg" },
Â  Â  Â  { title: "Baahubali", language: "Telugu", genre: "Action", price: 280, rating: 8.1, likes: 1400000, age: "U/A 13+", description: "A young man learns about his royal heritage and rises to reclaim his kingdom.", cast: ["Prabhas", "Rana Daggubati", "Anushka Shetty"], reviews: ["Visually grand and epic storytelling.", "Indian cinema at global standards."], trailer: "https://www.youtube.com/watch?v=VdafjyFK3ko", poster: "Bahubali.jpg" },
Â  Â  Â  { title: "Hellaro", language: "Gujarati", genre: "Drama", price: 160, rating: 8.3, likes: 400000, age: "U/A 13+", description: "Set in 1975, women in a village find liberation through Garba dance.", cast: ["Shraddha Dangar", "Jayesh More"], reviews: ["National Award-winning masterpiece.", "Powerful story of women empowerment."], trailer: "https://www.youtube.com/watch?v=qb8uOylK3R4", poster: "Hellaro.jpg" },
Â  Â  Â  { title: "Interstellar", language: "English", genre: "Sci-Fi", price: 360, rating: 8.7, likes: 1700000, age: "U/A 13+", description: "Astronauts travel through a wormhole to save humanity from extinction.", cast: ["Matthew McConaughey", "Anne Hathaway", "Jessica Chastain"], reviews: ["Visually stunning and emotionally deep.", "Nolan delivers another sci-fi classic."], trailer: "https://www.youtube.com/watch?v=zSWdZVtXT7E", poster: "Interstellar.jpg" },
Â  Â  Â  { title: "Dangal", language: "Hindi", genre: "Drama", price: 200, rating: 8.4, likes: 1500000, age: "U/A", description: "Based on the real story of wrestler Mahavir Singh Phogat training his daughters.", cast: ["Aamir Khan", "Fatima Sana Shaikh", "Sanya Malhotra"], reviews: ["Inspiring and brilliantly acted.", "One of the best sports dramas."], trailer: "https://www.youtube.com/watch?v=x_7YlGv9u1g", poster: "Dangal.jpg" },
Â  Â  Â  { title: "Train to Busan", language: "Korean", genre: "Thriller", price: 130, rating: 8.0, likes: 800000, age: "U/A 16+", description: "Passengers struggle to survive on a train during a zombie outbreak.", cast: ["Gong Yoo", "Ma Dong-seok", "Kim Su-an"], reviews: ["Thrilling and emotional zombie movie.", "Best Korean action-horror film."], trailer: "https://www.youtube.com/watch?v=pyWuHv2-Abk", poster: "TrainToBusan.jpg" },
Â  Â  Â  { title: "Robot 2.0", language: "Tamil", genre: "Sci-Fi", price: 370, rating: 7.2, likes: 750000, age: "U/A 13+", description: "Dr. Vaseegaran and Chitti battle an evil force threatening mobile networks.", cast: ["Rajinikanth", "Akshay Kumar", "Amy Jackson"], reviews: ["Amazing VFX and grand scale.", "Unique concept but a bit lengthy."], trailer: "https://www.youtube.com/watch?v=MVbeoSPqRs4", poster: "Robot2.0.png" }
Â  Â  ];

Â  Â  // ======= HELPERS =======
Â  Â  const el = id => document.getElementById(id);
Â  Â  
Â  Â  // Removed trailerToThumb function as it's no longer needed for the poster image.
Â  Â  const unique = arr => [...new Set(arr)];
Â  Â  
Â  Â  // New: Function to generate QR code URL (using Google Charts API)
Â  Â  function generateQRCode(data) {
Â  Â  Â  const encodedData = encodeURIComponent(data);
Â  Â  Â  return `https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=${encodedData}`;
Â  Â  }

Â  Â  // New: Function to generate the ticket HTML
Â  Â  function generateTicketHTML() {
Â  Â  Â  const m = movies[currentIndex];
Â  Â  Â  const date = el('sumDate').textContent;
Â  Â  Â  const theatre = el('sumTheatre').textContent;
Â  Â  Â  const slot = el('sumSlot').textContent;
Â  Â  Â  const seats = el('sumSeats').textContent;
Â  Â  Â  const total = el('sumTotal').textContent;

Â  Â  Â  const qrData = `Movie: ${m.title}, Date: ${date}, Theatre: ${theatre}, Slot: ${slot}, Seats: ${seats}, Total: ${total}`;
Â  Â  Â  const qrURL = generateQRCode(qrData);

Â  Â  Â  return `
Â  Â  Â  Â  <div id="ticket" style="font-family: 'Inter', sans-serif; padding:20px; border:2px dashed #333; border-radius:10px; text-align:center; max-width:400px; margin:auto; background:rgb(15 23 42); color:#fff; border-color:rgb(24 24 27); ">
Â  Â  Â  Â  Â  <h2 style="margin-bottom:15px; font-weight:700;">ğŸŸï¸ E-Ticket for ${m.title}</h2>
Â  Â  Â  Â  Â  <div style="text-align: left; background:rgb(39 39 42); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
Â  Â  Â  Â  Â  Â  <p style="margin: 5px 0;"><b>Date:</b> <span style="float: right; color:#fff;">${date}</span></p>
Â  Â  Â  Â  Â  Â  <p style="margin: 5px 0;"><b>Theatre:</b> <span style="float: right; color:#fff;">${theatre}</span></p>
Â  Â  Â  Â  Â  Â  <p style="margin: 5px 0;"><b>Slot:</b> <span style="float: right; color:#fff;">${slot}</span></p>
Â  Â  Â  Â  Â  Â  <p style="margin: 5px 0;"><b>Seats:</b> <span style="float: right; color:#fff;">${seats}</span></p>
Â  Â  Â  Â  Â  Â  <p style="margin: 5px 0; padding-top: 10px; border-top: 1px dashed rgba(255,255,255,0.2);"><b>Total:</b> <span style="float: right; font-weight: bold; color: #38bdf8;">${total}</span></p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <img src="code2.jpg" alt="QRCode" style="margin:30px 80px; border-radius: 5px; height: 150px; width: 150px;" />
Â  Â  Â  Â  Â  <p style="font-size: 0.8rem; margin-top: 5px; color: #a1a1aa;">Scan this code at the theatre entrance.</p>
Â  Â  Â  Â  Â  <div style="margin-top:20px;">
Â  Â  Â  Â  Â  Â  <button id="downloadPdfBtn" style="padding:10px 15px; background:#22c55e; color:#000; font-weight: 600; border:none; border-radius:8px; cursor:pointer;">Download Ticket (PDF)</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  `;
Â  Â  }


Â  Â  // ======= INIT SELECTS =======
Â  Â  const movieSelect = el('movieSelect');
Â  Â  movies.forEach((m, i) => {
Â  Â  Â  const opt = document.createElement('option');
Â  Â  Â  opt.value = i; opt.textContent = m.title; movieSelect.appendChild(opt);
Â  Â  });

Â  Â  // Filters
Â  Â  const filterLanguage = el('filterLanguage');
Â  Â  const filterGenre = el('filterGenre');
Â  Â  unique(movies.map(m => m.language)).forEach(v => filterLanguage.appendChild(new Option(v, v)));
Â  Â  unique(movies.map(m => m.genre)).forEach(v => filterGenre.appendChild(new Option(v, v)));

Â  Â  // Theatres by language (mock)
Â  Â  const THEATRES = {
Â  Â  Â  English: ["PVR Central Mall", "INOX City Center", "CineMax Downtown"],
Â  Â  Â  Hindi: ["PVR Andheri", "Carnival Cinemas", "INOX Vashi"],
Â  Â  Â  Gujarati: ["City Gold Ashram Road", "Cinepolis Ahmedabad"],
Â  Â  Â  Tamil: ["AGS Cinemas", "PVR Grand Mall"],
Â  Â  Â  Telugu: ["AMB Cinemas", "PVR Hyderabad"],
Â  Â  Â  Korean: ["PVR Icon", "INOX Nexus"]
Â  Â  };

Â  Â  // Slots (mock)
Â  Â  const SLOTS = ["10:00 AM", "01:30 PM", "05:15 PM", "08:45 PM", "11:30 PM"];

Â  Â  // ======= RENDER MOVIE DETAILS =======
Â  Â  let currentIndex = 0; // default selection

Â  Â  function renderMovie(i){
Â  Â  Â  const m = movies[i];
Â  Â  Â  currentIndex = i;
Â  Â  Â  
Â  Â  Â  // Hide ticket section on movie change
Â  Â  Â  el('ticketContainer').classList.add('hidden');

Â  Â  Â  // Trailer iframe (remains based on YouTube URL)
Â  Â  Â  const v = new URL(m.trailer).searchParams.get('v');
Â  Â  Â  el('trailerFrame').src = v ? `https://www.youtube.com/embed/${v}` : m.trailer;

Â  Â  Â  // Headings & badges
Â  Â  Â  el('movieTitle').textContent = m.title;
Â  Â  Â  el('movieDescription').textContent = m.description;
Â  Â  Â  el('ageBadge').textContent = m.age;
Â  Â  Â  el('langBadge').textContent = m.language;
Â  Â  Â  el('genreBadge').textContent = m.genre;
Â  Â  Â  el('ratingValue').textContent = m.rating;
Â  Â  Â  el('priceValue').textContent = m.price;
Â  Â  Â  el('likesValue').textContent = Intl.NumberFormat('en', {notation:'compact'}).format(m.likes) + ' likes';

Â  Â  Â  // Poster & quick facts - ***MODIFIED LINE***
Â  Â  Â  el('posterImg').src = m.poster; 
Â  Â  Â  el('quickRating').textContent = m.rating;
Â  Â  Â  el('quickPrice').textContent = `â‚¹${m.price}`;
Â  Â  Â  el('quickGenre').textContent = `${m.genre} â€¢ ${m.language}`;

Â  Â  Â  // Cast chips
Â  Â  Â  const castRow = el('castRow');
Â  Â  Â  castRow.innerHTML = '';
Â  Â  Â  m.cast.forEach(name => {
Â  Â  Â  Â  const chip = document.createElement('div');
Â  Â  Â  Â  chip.className = 'flex items-center gap-2 glass rounded-2xl px-3 py-2 text-sm';
Â  Â  Â  Â  const circle = document.createElement('div');
Â  Â  Â  Â  circle.className = 'w-8 h-8 rounded-full bg-white/10 grid place-items-center text-xs';
Â  Â  Â  Â  circle.textContent = name.split(' ').map(s=>s[0]).slice(0,2).join('');
Â  Â  Â  Â  const label = document.createElement('span');
Â  Â  Â  Â  label.textContent = name;
Â  Â  Â  Â  chip.append(circle, label); castRow.appendChild(chip);
Â  Â  Â  });

Â  Â  Â  // Reviews
Â  Â  Â  const reviewsCol = el('reviewsCol');
Â  Â  Â  reviewsCol.innerHTML = '';
Â  Â  Â  m.reviews.forEach(r => {
Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  card.className = 'glass rounded-2xl p-3 text-sm text-white/80';
Â  Â  Â  Â  card.innerHTML = `â ${r} â`;
Â  Â  Â  Â  reviewsCol.appendChild(card);
Â  Â  Â  });

Â  Â  Â  // YouTube link
Â  Â  Â  const watchOnYT = el('watchOnYT');
Â  Â  Â  watchOnYT.href = m.trailer;

Â  Â  Â  // Preload booking controls
Â  Â  Â  populateTheatres(m.language);
Â  Â  Â  renderSlots();
Â  Â  Â  generateSeats();

Â  Â  Â  // Ensure dropdown reflects selection
Â  Â  Â  movieSelect.value = i;
Â  Â  }

Â  Â  // ======= BOOKING CONTROLS =======
Â  Â  const theatreSelect = el('theatreSelect');
Â  Â  const slotRow = el('slotRow');

Â  Â  function populateTheatres(lang){
Â  Â  Â  const list = THEATRES[lang] || ["PVR Cinemas", "INOX"];
Â  Â  Â  theatreSelect.innerHTML = '';
Â  Â  Â  list.forEach(t => theatreSelect.appendChild(new Option(t, t)));
Â  Â  }

Â  Â  function renderSlots(){
Â  Â  Â  slotRow.innerHTML = '';
Â  Â  Â  SLOTS.forEach(s => {
Â  Â  Â  Â  const btn = document.createElement('button');
Â  Â  Â  Â  btn.className = 'px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-sm';
Â  Â  Â  Â  btn.textContent = s; btn.dataset.slot = s;
Â  Â  Â  Â  btn.addEventListener('click', () => {
Â  Â  Â  Â  Â  [...slotRow.children].forEach(c => c.classList.remove('tag'));
Â  Â  Â  Â  Â  btn.classList.add('tag');
Â  Â  Â  Â  Â  slotRow.dataset.selected = s;
Â  Â  Â  Â  });
Â  Â  Â  Â  slotRow.appendChild(btn);
Â  Â  Â  });
Â  Â  Â  // Default select first
Â  Â  Â  slotRow.children[0]?.click();
Â  Â  }

Â  Â  // Seats grid
Â  Â  const seatsGrid = el('seatsGrid');
Â  Â  const selected = new Set();

Â  Â  function generateSeats(){
Â  Â  Â  seatsGrid.innerHTML = '';
Â  Â  Â  selected.clear();
Â  Â  Â  const rows = 8, cols = 12;
Â  Â  Â  const bookedIndices = new Set();
Â  Â  Â  // Randomly mark ~20% booked for demo
Â  Â  Â  while (bookedIndices.size < Math.floor(rows*cols*0.2)) {
Â  Â  Â  Â  bookedIndices.add(Math.floor(Math.random()*rows*cols));
Â  Â  Â  }
Â  Â  Â  for(let r=0;r<rows;r++){
Â  Â  Â  Â  for(let c=0;c<cols;c++){
Â  Â  Â  Â  Â  const i = r*cols+c;
Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  div.className = 'seat available';
Â  Â  Â  Â  Â  if(bookedIndices.has(i)) { div.classList.remove('available'); div.classList.add('booked'); }
Â  Â  Â  Â  Â  div.textContent = String.fromCharCode(65+r)+(c+1);
Â  Â  Â  Â  Â  div.dataset.id = i;
Â  Â  Â  Â  Â  div.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  if(div.classList.contains('booked')) return;
Â  Â  Â  Â  Â  Â  div.classList.toggle('selected');
Â  Â  Â  Â  Â  Â  if(div.classList.contains('selected')) selected.add(i); else selected.delete(i);
Â  Â  Â  Â  Â  Â  updateTotals();
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  seatsGrid.appendChild(div);
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  updateTotals();
Â  Â  }

Â  Â  function updateTotals(){
Â  Â  Â  el('selectedCount').textContent = selected.size;
Â  Â  Â  const price = movies[currentIndex].price * selected.size;
Â  Â  Â  el('totalPrice').textContent = `â‚¹${price}`;
Â  Â  }

Â  Â  // ======= EVENTS =======
Â  Â  movieSelect.addEventListener('change', e => renderMovie(Number(e.target.value)));
Â  Â  el('bookNowTop').addEventListener('click', () => document.getElementById('bookingSection').scrollIntoView({behavior:'smooth'}));
Â  Â  el('scrollToBooking').addEventListener('click', () => document.getElementById('bookingSection').scrollIntoView({behavior:'smooth'}));

Â  Â  // Filters: when applied, auto-jump to first matching movie
Â  Â  function applyFilters(){
Â  Â  Â  const L = filterLanguage.value; const G = filterGenre.value;
Â  Â  Â  const idx = movies.findIndex(m => (!L || m.language===L) && (!G || m.genre===G));
Â  Â  Â  if(idx>=0) renderMovie(idx);
Â  Â  }
Â  Â  filterLanguage.addEventListener('change', applyFilters);
Â  Â  filterGenre.addEventListener('change', applyFilters);
Â  Â  el('clearFilters').addEventListener('click', () => { filterLanguage.value=''; filterGenre.value=''; renderMovie(0); });

Â  Â  // Proceed to Payment (Modal)
Â  Â  const modal = document.getElementById('modal');
Â  Â  function openModal(){
Â  Â  Â  const m = movies[currentIndex];
Â  Â  Â  el('sumMovie').textContent = m.title;
Â  Â  Â  el('sumDate').textContent = el('dateInput').value || new Date().toISOString().slice(0,10);
Â  Â  Â  el('sumTheatre').textContent = theatreSelect.value;
Â  Â  Â  el('sumSlot').textContent = slotRow.dataset.selected || SLOTS[0];
Â  Â  Â  const seats = [...selected].sort((a,b)=>a-b).map(i=>{
Â  Â  Â  Â  const cols = 12; const r = Math.floor(i/cols), c = i%cols; return String.fromCharCode(65+r)+(c+1);
Â  Â  Â  });
Â  Â  Â  el('sumSeats').textContent = seats.join(', ') || 'â€”';
Â  Â  Â  el('sumTotal').textContent = `â‚¹${m.price * selected.size}`;
Â  Â  Â  modal.classList.remove('hidden');
Â  Â  }

Â  Â  // 1. Custom listener for Proceed button to check for seat selection
Â  Â  document.getElementById('proceedBtn').addEventListener('click', () => {
Â  Â  Â  if (selected.size === 0) {
Â  Â  Â  Â  alert('âš ï¸ Please select at least one seat before proceeding to payment.');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  openModal();
Â  Â  });
Â  Â  
Â  Â  document.getElementById('closeModal').addEventListener('click', ()=> modal.classList.add('hidden'));
Â  Â  document.getElementById('closeModal2').addEventListener('click', ()=> modal.classList.add('hidden'));

Â  Â  // 2. & 3. Custom listener for Pay Now to show success and ticket
Â  Â  document.getElementById('confirmPay').addEventListener('click', ()=>{
Â  Â  Â  modal.classList.add('hidden');
Â  Â  Â  
Â  Â  Â  // Show success message (alert)
Â  Â  Â  alert('ğŸ‰ Payment Successful! Your booking is confirmed.');

Â  Â  Â  // Generate and display the ticket
Â  Â  Â  const ticketHTML = generateTicketHTML();
Â  Â  Â  el('ticketOutput').innerHTML = ticketHTML;
Â  Â  Â  
Â  Â  Â  // Show the ticket container and scroll to it
Â  Â  Â  el('ticketContainer').classList.remove('hidden');
Â  Â  Â  el('ticketContainer').scrollIntoView({behavior:'smooth'});
Â  Â  });


Â  Â  // Default render first movie
Â  Â  renderMovie(11);

Â  Â  // Default date today
Â  Â  el('dateInput').value = new Date().toISOString().slice(0,10);
// ======= PDF DOWNLOAD IMPLEMENTATION =======
    
    // Function to handle the actual PDF generation
    function downloadTicketAsPDF() {
      const ticketElement = document.getElementById('ticket'); 
      if (!ticketElement) return;

      // Use html2canvas to render the HTML element as a canvas image
      html2canvas(ticketElement, { 
        scale: 2, // Use a higher scale for better resolution
        backgroundColor: '#0f172a', 
      }).then(canvas => {
        const imgData = canvas.toDataURL('image/png');
        const { jsPDF } = window.jspdf;
        
        const unit = 'mm';
        // Use A4 size for plenty of space
        const pdf = new jsPDF('p', unit, 'a4'); 
        
        // Use a generous margin (20mm) for X and Y
        const margin = 50; 
        
        // Get the actual PDF page dimensions
        const pdfPageWidth = pdf.internal.pageSize.getWidth();
        
        // Calculate the maximum usable width on the PDF page
        const maxPdfUsableWidth = pdfPageWidth - 2 * margin; 

        // Calculate the scale factor to fit the canvas width into the usable PDF width
        const scaleFactor = maxPdfUsableWidth / canvas.width;

        // Apply the scale factor to both width and height for correct aspect ratio
        const pdfImageWidth = canvas.width * scaleFactor;
        const pdfImageHeight = canvas.height * scaleFactor;

        // Add the image to the PDF
        // Start drawing at (margin, margin) to push the content away from the edges
        pdf.addImage(
            imgData, 
            'PNG', 
            margin, // X position (start after margin)
            margin, // Y position (start after margin)
            pdfImageWidth, 
            pdfImageHeight
        );
        
        // Save the PDF file
        const movieTitle = movies[currentIndex].title.replace(/\s/g, '_');
        pdf.save(`TicketTales_${movieTitle}.pdf`);
      });
    }

    // Event listener attached after the ticket is generated and displayed
    document.getElementById('ticketOutput').addEventListener('click', (e) => {
        // We listen on the container and check if the clicked element is the button
        if (e.target && e.target.id === 'downloadPdfBtn') {
            downloadTicketAsPDF();
        }
    });


Â  </script>
</body>
</html>
