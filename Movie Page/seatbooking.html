<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Detail Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <!-- Movie Detail Page -->
  <div class="max-w-6xl mx-auto p-4">
    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
      <!-- Trailer -->
      <div class="aspect-w-16 aspect-h-9">
        <iframe class="w-full h-96" src="https://www.youtube.com/embed/YoHD9XEInc0" frameborder="0" allowfullscreen></iframe>
      </div>

      <!-- Info -->
      <div class="p-6">
        <h1 class="text-3xl font-bold">Inception</h1>
        <p class="text-gray-600 mt-2">A thief who enters the dreams of others to steal secrets must pull off his toughest job yet.</p>
        <p class="mt-2"><span class="font-semibold">Genre:</span> Sci-Fi | <span class="font-semibold">Language:</span> English | <span class="font-semibold">Age:</span> U/A 13+</p>
        <p class="mt-1"><span class="font-semibold">Price:</span> ₹120</p>
      </div>

      <!-- Cast -->
      <div class="p-6 border-t">
        <h2 class="text-xl font-semibold mb-3">Cast</h2>
        <div class="flex space-x-4 overflow-x-auto">
          <div class="text-center">
            <div class="w-16 h-16 bg-gray-300 rounded-full"></div>
            <p class="text-sm mt-1">Leonardo DiCaprio</p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-gray-300 rounded-full"></div>
            <p class="text-sm mt-1">Joseph Gordon-Levitt</p>
          </div>
          <div class="text-center">
            <div class="w-16 h-16 bg-gray-300 rounded-full"></div>
            <p class="text-sm mt-1">Elliot Page</p>
          </div>
        </div>
      </div>

      <!-- Booking Section -->
      <div class="p-6 border-t">
        <h2 class="text-xl font-semibold mb-3">Book Seats</h2>
        <div class="grid grid-cols-6 gap-2 mb-4" id="seatContainer">
          <!-- Seats dynamically added -->
        </div>
        <button id="proceedBtn" class="bg-blue-600 text-white px-4 py-2 rounded">Proceed to Payment</button>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div id="ticketModal" class="fixed inset-0 hidden bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white p-6 rounded-lg w-96 text-center">
      <h2 class="text-2xl font-bold mb-4">Your Ticket</h2>
      <p class="mb-2">Movie: Inception</p>
      <p id="ticketSeats" class="mb-2"></p>
      <p id="ticketPrice" class="mb-4"></p>
      <canvas id="qrCode" class="mx-auto mb-4"></canvas>
      <button id="downloadBtn" class="bg-green-600 text-white px-4 py-2 rounded">Download Ticket</button>
      <button onclick="closeModal()" class="ml-2 bg-gray-500 text-white px-4 py-2 rounded">Close</button>
    </div>
  </div>

  <script>
    const seatContainer = document.getElementById('seatContainer');
    const proceedBtn = document.getElementById('proceedBtn');
    const ticketModal = document.getElementById('ticketModal');
    const ticketSeats = document.getElementById('ticketSeats');
    const ticketPrice = document.getElementById('ticketPrice');
    const qrCanvas = document.getElementById('qrCode');
    const downloadBtn = document.getElementById('downloadBtn');

    const seatPrice = 120;
    const seats = [];

    // Generate seats
    for (let i = 1; i <= 18; i++) {
      const seat = document.createElement('div');
      seat.textContent = i;
      seat.className = 'seat cursor-pointer bg-gray-200 text-center py-2 rounded hover:bg-blue-300';
      seat.dataset.selected = 'false';
      seat.onclick = () => {
        if (seat.dataset.selected === 'false') {
          seat.dataset.selected = 'true';
          seat.classList.add('bg-blue-600', 'text-white');
          seats.push(i);
        } else {
          seat.dataset.selected = 'false';
          seat.classList.remove('bg-blue-600', 'text-white');
          const index = seats.indexOf(i);
          if (index > -1) seats.splice(index, 1);
        }
      };
      seatContainer.appendChild(seat);
    }

    // Proceed button
    proceedBtn.onclick = () => {
      if (seats.length === 0) {
        alert('Please select at least one seat before proceeding.');
        return;
      }
      const totalPrice = seats.length * seatPrice;
      ticketSeats.textContent = `Seats: ${seats.join(', ')}`;
      ticketPrice.textContent = `Total Price: ₹${totalPrice}`;
      const qr = new QRious({
        element: qrCanvas,
        value: `Movie: Inception | Seats: ${seats.join(', ')} | Price: ₹${totalPrice}`,
        size: 150
      });
      ticketModal.classList.remove('hidden');
    };

    // Close modal
    function closeModal() {
      ticketModal.classList.add('hidden');
    }

    // Download Ticket
    downloadBtn.onclick = () => {
      const link = document.createElement('a');
      link.download = 'ticket.png';
      link.href = qrCanvas.toDataURL();
      link.click();
    };
  </script>
</body>
</html>
